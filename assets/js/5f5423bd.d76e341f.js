"use strict";(self.webpackChunkBOB_docs=self.webpackChunkBOB_docs||[]).push([[1010],{2175:(e,l,r)=>{r.r(l),r.d(l,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>s});var n=r(4848),d=r(8453);const i={},c="OrdMarketplace",t={id:"contracts/src/src/swap/Ord_Marketplace.sol/contract.OrdMarketplace",title:"OrdMarketplace",description:"Git Source",source:"@site/docs/contracts/src/src/swap/Ord_Marketplace.sol/contract.OrdMarketplace.md",sourceDirName:"contracts/src/src/swap/Ord_Marketplace.sol",slug:"/contracts/src/src/swap/Ord_Marketplace.sol/contract.OrdMarketplace",permalink:"/docs/contracts/src/src/swap/Ord_Marketplace.sol/contract.OrdMarketplace",draft:!1,unlisted:!1,editUrl:"https://github.com/bob-collective/bob/tree/master/docs/docs/contracts/src/src/swap/Ord_Marketplace.sol/contract.OrdMarketplace.md",tags:[],version:"current",frontMatter:{},sidebar:"contractSidebar",previous:{title:"MarketPlace",permalink:"/docs/contracts/src/src/swap/Marketplace.sol/contract.MarketPlace"},next:{title:"BobWrappedBtc",permalink:"/docs/contracts/src/src/swap/Wrapped.sol/contract.BobWrappedBtc"}},a={},s=[{value:"State Variables",id:"state-variables",level:2},{value:"ordinalSellOrders",id:"ordinalsellorders",level:3},{value:"acceptedOrdinalSellOrders",id:"acceptedordinalsellorders",level:3},{value:"nextOrdinalId",id:"nextordinalid",level:3},{value:"REQUEST_EXPIRATION_SECONDS",id:"request_expiration_seconds",level:3},{value:"testLightRelay",id:"testlightrelay",level:3},{value:"txProofDifficultyFactor",id:"txproofdifficultyfactor",level:3},{value:"Functions",id:"functions",level:2},{value:"constructor",id:"constructor",level:3},{value:"setRelay",id:"setrelay",level:3},{value:"placeOrdinalSellOrder",id:"placeordinalsellorder",level:3},{value:"acceptOrdinalSellOrder",id:"acceptordinalsellorder",level:3},{value:"proofOrdinalSellOrder",id:"proofordinalsellorder",level:3},{value:"_checkBitcoinTxOutput",id:"_checkbitcointxoutput",level:3},{value:"withdrawOrdinalSellOrder",id:"withdrawordinalsellorder",level:3},{value:"cancelAcceptedOrdinalSellOrder",id:"cancelacceptedordinalsellorder",level:3},{value:"getOpenOrdinalSellOrders",id:"getopenordinalsellorders",level:3},{value:"getOpenAcceptedOrdinalSellOrders",id:"getopenacceptedordinalsellorders",level:3},{value:"Events",id:"events",level:2},{value:"placeOrdinalSellOrderEvent",id:"placeordinalsellorderevent",level:3},{value:"acceptOrdinalSellOrderEvent",id:"acceptordinalsellorderevent",level:3},{value:"proofOrdinalSellOrderEvent",id:"proofordinalsellorderevent",level:3},{value:"withdrawOrdinalSellOrderEvent",id:"withdrawordinalsellorderevent",level:3},{value:"cancelAcceptedOrdinalSellOrderEvent",id:"cancelacceptedordinalsellorderevent",level:3},{value:"Structs",id:"structs",level:2},{value:"OrdinalSellOrder",id:"ordinalsellorder",level:3},{value:"AcceptedOrdinalSellOrder",id:"acceptedordinalsellorder",level:3},{value:"BitcoinAddress",id:"bitcoinaddress",level:3},{value:"OrdinalId",id:"ordinalid",level:3}];function o(e){const l={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.header,{children:(0,n.jsx)(l.h1,{id:"ordmarketplace",children:"OrdMarketplace"})}),"\n",(0,n.jsx)(l.p,{children:(0,n.jsx)(l.a,{href:"https://github.com/bob-collective/bob/blob/master/src/swap/Ord_Marketplace.sol",children:"Git Source"})}),"\n",(0,n.jsx)(l.h2,{id:"state-variables",children:"State Variables"}),"\n",(0,n.jsx)(l.h3,{id:"ordinalsellorders",children:"ordinalSellOrders"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"mapping(uint256 => OrdinalSellOrder) public ordinalSellOrders;\n"})}),"\n",(0,n.jsx)(l.h3,{id:"acceptedordinalsellorders",children:"acceptedOrdinalSellOrders"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"mapping(uint256 => AcceptedOrdinalSellOrder) public acceptedOrdinalSellOrders;\n"})}),"\n",(0,n.jsx)(l.h3,{id:"nextordinalid",children:"nextOrdinalId"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"uint256 nextOrdinalId;\n"})}),"\n",(0,n.jsx)(l.h3,{id:"request_expiration_seconds",children:"REQUEST_EXPIRATION_SECONDS"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"uint256 public constant REQUEST_EXPIRATION_SECONDS = 6 hours;\n"})}),"\n",(0,n.jsx)(l.h3,{id:"testlightrelay",children:"testLightRelay"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"TestLightRelay internal testLightRelay;\n"})}),"\n",(0,n.jsx)(l.h3,{id:"txproofdifficultyfactor",children:"txProofDifficultyFactor"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"uint256 internal txProofDifficultyFactor;\n"})}),"\n",(0,n.jsx)(l.h2,{id:"functions",children:"Functions"}),"\n",(0,n.jsx)(l.h3,{id:"constructor",children:"constructor"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"constructor(TestLightRelay _relay);\n"})}),"\n",(0,n.jsx)(l.h3,{id:"setrelay",children:"setRelay"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"function setRelay(TestLightRelay _relay) internal;\n"})}),"\n",(0,n.jsx)(l.h3,{id:"placeordinalsellorder",children:"placeOrdinalSellOrder"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"function placeOrdinalSellOrder(\n    OrdinalId calldata ordinalID,\n    BitcoinTx.UTXO calldata utxo,\n    address sellToken,\n    uint256 sellAmount\n) public;\n"})}),"\n",(0,n.jsx)(l.h3,{id:"acceptordinalsellorder",children:"acceptOrdinalSellOrder"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"function acceptOrdinalSellOrder(uint256 id, BitcoinAddress calldata bitcoinAddress) public returns (uint256);\n"})}),"\n",(0,n.jsx)(l.h3,{id:"proofordinalsellorder",children:"proofOrdinalSellOrder"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"function proofOrdinalSellOrder(uint256 id, BitcoinTx.Info calldata transaction, BitcoinTx.Proof calldata proof)\n    public;\n"})}),"\n",(0,n.jsx)(l.h3,{id:"_checkbitcointxoutput",children:"_checkBitcoinTxOutput"}),"\n",(0,n.jsx)(l.p,{children:"Checks output script pubkey (recipient address) matches output script.\nReverts if bitcoin address is not found."}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"function _checkBitcoinTxOutput(BitcoinAddress storage bitcoinAddress, BitcoinTx.Info calldata transaction)\n    private\n    view;\n"})}),"\n",(0,n.jsx)(l.p,{children:(0,n.jsx)(l.strong,{children:"Parameters"})}),"\n",(0,n.jsxs)(l.table,{children:[(0,n.jsx)(l.thead,{children:(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.th,{children:"Name"}),(0,n.jsx)(l.th,{children:"Type"}),(0,n.jsx)(l.th,{children:"Description"})]})}),(0,n.jsxs)(l.tbody,{children:[(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:(0,n.jsx)(l.code,{children:"bitcoinAddress"})}),(0,n.jsx)(l.td,{children:(0,n.jsx)(l.code,{children:"BitcoinAddress"})}),(0,n.jsx)(l.td,{children:"Recipient's bitcoin address."})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:(0,n.jsx)(l.code,{children:"transaction"})}),(0,n.jsx)(l.td,{children:(0,n.jsx)(l.code,{children:"BitcoinTx.Info"})}),(0,n.jsx)(l.td,{children:"Transaction fulfilling the order."})]})]})]}),"\n",(0,n.jsx)(l.h3,{id:"withdrawordinalsellorder",children:"withdrawOrdinalSellOrder"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"function withdrawOrdinalSellOrder(uint256 id) public;\n"})}),"\n",(0,n.jsx)(l.h3,{id:"cancelacceptedordinalsellorder",children:"cancelAcceptedOrdinalSellOrder"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"function cancelAcceptedOrdinalSellOrder(uint256 id) public;\n"})}),"\n",(0,n.jsx)(l.h3,{id:"getopenordinalsellorders",children:"getOpenOrdinalSellOrders"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"function getOpenOrdinalSellOrders() external view returns (OrdinalSellOrder[] memory, uint256[] memory);\n"})}),"\n",(0,n.jsx)(l.h3,{id:"getopenacceptedordinalsellorders",children:"getOpenAcceptedOrdinalSellOrders"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"function getOpenAcceptedOrdinalSellOrders()\n    external\n    view\n    returns (AcceptedOrdinalSellOrder[] memory, uint256[] memory);\n"})}),"\n",(0,n.jsx)(l.h2,{id:"events",children:"Events"}),"\n",(0,n.jsx)(l.h3,{id:"placeordinalsellorderevent",children:"placeOrdinalSellOrderEvent"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"event placeOrdinalSellOrderEvent(uint256 indexed orderId, OrdinalId ordinalID, address sellToken, uint256 sellAmount);\n"})}),"\n",(0,n.jsx)(l.h3,{id:"acceptordinalsellorderevent",children:"acceptOrdinalSellOrderEvent"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"event acceptOrdinalSellOrderEvent(\n    uint256 indexed id, uint256 indexed acceptId, BitcoinAddress bitcoinAddress, address ercToken, uint256 ercAmount\n);\n"})}),"\n",(0,n.jsx)(l.h3,{id:"proofordinalsellorderevent",children:"proofOrdinalSellOrderEvent"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"event proofOrdinalSellOrderEvent(uint256 id);\n"})}),"\n",(0,n.jsx)(l.h3,{id:"withdrawordinalsellorderevent",children:"withdrawOrdinalSellOrderEvent"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"event withdrawOrdinalSellOrderEvent(uint256 id);\n"})}),"\n",(0,n.jsx)(l.h3,{id:"cancelacceptedordinalsellorderevent",children:"cancelAcceptedOrdinalSellOrderEvent"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"event cancelAcceptedOrdinalSellOrderEvent(uint256 id);\n"})}),"\n",(0,n.jsx)(l.h2,{id:"structs",children:"Structs"}),"\n",(0,n.jsx)(l.h3,{id:"ordinalsellorder",children:"OrdinalSellOrder"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"struct OrdinalSellOrder {\n    OrdinalId ordinalID;\n    address sellToken;\n    uint256 sellAmount;\n    BitcoinTx.UTXO utxo;\n    address requester;\n    bool isOrderAccepted;\n}\n"})}),"\n",(0,n.jsx)(l.h3,{id:"acceptedordinalsellorder",children:"AcceptedOrdinalSellOrder"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"struct AcceptedOrdinalSellOrder {\n    uint256 orderId;\n    BitcoinAddress bitcoinAddress;\n    address ercToken;\n    uint256 ercAmount;\n    address requester;\n    address acceptor;\n    uint256 acceptTime;\n}\n"})}),"\n",(0,n.jsx)(l.h3,{id:"bitcoinaddress",children:"BitcoinAddress"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"struct BitcoinAddress {\n    bytes scriptPubKey;\n}\n"})}),"\n",(0,n.jsx)(l.h3,{id:"ordinalid",children:"OrdinalId"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-solidity",children:"struct OrdinalId {\n    bytes32 txId;\n    uint32 index;\n}\n"})})]})}function h(e={}){const{wrapper:l}={...(0,d.R)(),...e.components};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},8453:(e,l,r)=>{r.d(l,{R:()=>c,x:()=>t});var n=r(6540);const d={},i=n.createContext(d);function c(e){const l=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function t(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:c(e.components),n.createElement(i.Provider,{value:l},e.children)}}}]);