"use strict";(self.webpackChunkBOB_docs=self.webpackChunkBOB_docs||[]).push([[8162],{5139:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>f,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var s=n(4848),a=n(8453);const t={},i="SafeTransferLib",o={id:"contracts/src/src/paymasters/AccountAbstraction/SafeTransferLib.sol/library.SafeTransferLib",title:"SafeTransferLib",description:"Git Source",source:"@site/docs/contracts/src/src/paymasters/AccountAbstraction/SafeTransferLib.sol/library.SafeTransferLib.md",sourceDirName:"contracts/src/src/paymasters/AccountAbstraction/SafeTransferLib.sol",slug:"/contracts/src/src/paymasters/AccountAbstraction/SafeTransferLib.sol/library.SafeTransferLib",permalink:"/docs/contracts/src/src/paymasters/AccountAbstraction/SafeTransferLib.sol/library.SafeTransferLib",draft:!1,unlisted:!1,editUrl:"https://github.com/bob-collective/bob/tree/master/docs/docs/contracts/src/src/paymasters/AccountAbstraction/SafeTransferLib.sol/library.SafeTransferLib.md",tags:[],version:"current",frontMatter:{},sidebar:"contractSidebar",previous:{title:"PimlicoERC20Paymaster",permalink:"/docs/contracts/src/src/paymasters/AccountAbstraction/AATokenPaymaster.sol/contract.PimlicoERC20Paymaster"},next:{title:"OnboardingPaymaster",permalink:"/docs/contracts/src/src/paymasters/OnboardingPaymaster.sol/contract.OnboardingPaymaster"}},l={},c=[{value:"State Variables",id:"state-variables",level:2},{value:"_GAS_STIPEND_NO_STORAGE_WRITES",id:"_gas_stipend_no_storage_writes",level:3},{value:"_GAS_STIPEND_NO_GRIEF",id:"_gas_stipend_no_grief",level:3},{value:"Functions",id:"functions",level:2},{value:"safeTransferFrom",id:"safetransferfrom",level:3},{value:"safeTransferAllFrom",id:"safetransferallfrom",level:3},{value:"safeTransfer",id:"safetransfer",level:3},{value:"safeTransferAll",id:"safetransferall",level:3},{value:"safeApprove",id:"safeapprove",level:3},{value:"balanceOf",id:"balanceof",level:3},{value:"Errors",id:"errors",level:2},{value:"ETHTransferFailed",id:"ethtransferfailed",level:3},{value:"TransferFromFailed",id:"transferfromfailed",level:3},{value:"TransferFailed",id:"transferfailed",level:3},{value:"ApproveFailed",id:"approvefailed",level:3}];function d(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"safetransferlib",children:"SafeTransferLib"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.a,{href:"https://github.com/bob-collective/bob/blob/master/src/paymasters/AccountAbstraction/SafeTransferLib.sol",children:"Git Source"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Authors:"}),"\nSolady (",(0,s.jsx)(r.a,{href:"https://github.com/vectorized/solady/blob/main/src/utils/SafeTransferLib.sol",children:"https://github.com/vectorized/solady/blob/main/src/utils/SafeTransferLib.sol"}),"), Modified from Solmate (",(0,s.jsx)(r.a,{href:"https://github.com/transmissions11/solmate/blob/main/src/utils/SafeTransferLib.sol",children:"https://github.com/transmissions11/solmate/blob/main/src/utils/SafeTransferLib.sol"}),")"]}),"\n",(0,s.jsx)(r.p,{children:"Safe ETH and ERC20 transfer library that gracefully handles missing return values."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"Caution! This library won't check that a token has code, responsibility is delegated to the caller."})}),"\n",(0,s.jsx)(r.h2,{id:"state-variables",children:"State Variables"}),"\n",(0,s.jsx)(r.h3,{id:"_gas_stipend_no_storage_writes",children:"_GAS_STIPEND_NO_STORAGE_WRITES"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"Suggested gas stipend for contract receiving ETH\nthat disallows any storage writes."})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"uint256 internal constant _GAS_STIPEND_NO_STORAGE_WRITES = 2300;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"_gas_stipend_no_grief",children:"_GAS_STIPEND_NO_GRIEF"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"Suggested gas stipend for contract receiving ETH to perform a few\nstorage reads and writes, but low enough to prevent griefing.\nMultiply by a small constant (e.g. 2), if needed."})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"uint256 internal constant _GAS_STIPEND_NO_GRIEF = 100000;\n"})}),"\n",(0,s.jsx)(r.h2,{id:"functions",children:"Functions"}),"\n",(0,s.jsx)(r.h3,{id:"safetransferfrom",children:"safeTransferFrom"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["Sends ",(0,s.jsx)(r.code,{children:"amount"})," of ERC20 ",(0,s.jsx)(r.code,{children:"token"})," from ",(0,s.jsx)(r.code,{children:"from"})," to ",(0,s.jsx)(r.code,{children:"to"}),".\nReverts upon failure.\nThe ",(0,s.jsx)(r.code,{children:"from"})," account must have at least ",(0,s.jsx)(r.code,{children:"amount"})," approved for\nthe current contract to manage."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function safeTransferFrom(address token, address from, address to, uint256 amount) internal;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"safetransferallfrom",children:"safeTransferAllFrom"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["Sends all of ERC20 ",(0,s.jsx)(r.code,{children:"token"})," from ",(0,s.jsx)(r.code,{children:"from"})," to ",(0,s.jsx)(r.code,{children:"to"}),".\nReverts upon failure.\nThe ",(0,s.jsx)(r.code,{children:"from"})," account must have at least ",(0,s.jsx)(r.code,{children:"amount"})," approved for\nthe current contract to manage."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function safeTransferAllFrom(address token, address from, address to) internal returns (uint256 amount);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"safetransfer",children:"safeTransfer"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["Sends ",(0,s.jsx)(r.code,{children:"amount"})," of ERC20 ",(0,s.jsx)(r.code,{children:"token"})," from the current contract to ",(0,s.jsx)(r.code,{children:"to"}),".\nReverts upon failure."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function safeTransfer(address token, address to, uint256 amount) internal;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"safetransferall",children:"safeTransferAll"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["Sends all of ERC20 ",(0,s.jsx)(r.code,{children:"token"})," from the current contract to ",(0,s.jsx)(r.code,{children:"to"}),".\nReverts upon failure."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function safeTransferAll(address token, address to) internal returns (uint256 amount);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"safeapprove",children:"safeApprove"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["Sets ",(0,s.jsx)(r.code,{children:"amount"})," of ERC20 ",(0,s.jsx)(r.code,{children:"token"})," for ",(0,s.jsx)(r.code,{children:"to"})," to manage on behalf of the current contract.\nReverts upon failure."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function safeApprove(address token, address to, uint256 amount) internal;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"balanceof",children:"balanceOf"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["Returns the amount of ERC20 ",(0,s.jsx)(r.code,{children:"token"})," owned by ",(0,s.jsx)(r.code,{children:"account"}),".\nReturns zero if the ",(0,s.jsx)(r.code,{children:"token"})," does not exist."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function balanceOf(address token, address account) internal view returns (uint256 amount);\n"})}),"\n",(0,s.jsx)(r.h2,{id:"errors",children:"Errors"}),"\n",(0,s.jsx)(r.h3,{id:"ethtransferfailed",children:"ETHTransferFailed"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"The ETH transfer has failed."})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"error ETHTransferFailed();\n"})}),"\n",(0,s.jsx)(r.h3,{id:"transferfromfailed",children:"TransferFromFailed"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["The ERC20 ",(0,s.jsx)(r.code,{children:"transferFrom"})," has failed."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"error TransferFromFailed();\n"})}),"\n",(0,s.jsx)(r.h3,{id:"transferfailed",children:"TransferFailed"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["The ERC20 ",(0,s.jsx)(r.code,{children:"transfer"})," has failed."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"error TransferFailed();\n"})}),"\n",(0,s.jsx)(r.h3,{id:"approvefailed",children:"ApproveFailed"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["The ERC20 ",(0,s.jsx)(r.code,{children:"approve"})," has failed."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"error ApproveFailed();\n"})})]})}function f(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>o});var s=n(6540);const a={},t=s.createContext(a);function i(e){const r=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);