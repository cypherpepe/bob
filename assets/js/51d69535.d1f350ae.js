"use strict";(self.webpackChunkBOB_docs=self.webpackChunkBOB_docs||[]).push([[889],{84:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var a=t(4848),r=t(8453),s=t(1470),i=t(9365);const o={sidebar_position:4},l="sats-wagmi - Reactive primitives for Bitcoin apps",c={id:"build/bob-sdk/sats-wagmi",title:"sats-wagmi - Reactive primitives for Bitcoin apps",description:"sats-wagmi is a library with a handful of BTC wallet connectors, leaving aside the need of the developer to integrate each one individually. The library also exports useful React hooks that mimic the standard followed in the EVM wagmi library.",source:"@site/docs/build/bob-sdk/sats-wagmi.md",sourceDirName:"build/bob-sdk",slug:"/build/bob-sdk/sats-wagmi",permalink:"/docs/build/bob-sdk/sats-wagmi",draft:!1,unlisted:!1,editUrl:"https://github.com/bob-collective/bob/tree/master/docs/docs/build/bob-sdk/sats-wagmi.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"buildSidebar",previous:{title:"Interact with Bitcoin from BOB Smart Contracts",permalink:"/docs/build/bob-sdk/relay"},next:{title:"wBTC, tBTC, and other ERC-20 as Gas Token",permalink:"/docs/build/bob-sdk/bridged-btc-gas-fee/"}},u={},d=[{value:"Features",id:"features",level:2},{value:"Installation",id:"installation",level:2},{value:"Connect Wallet",id:"connect-wallet",level:2},{value:"1. Wrap App in Context Provider",id:"1-wrap-app-in-context-provider",level:3},{value:"2. Display Wallet Options",id:"2-display-wallet-options",level:3},{value:"3. Display Connected Account",id:"3-display-connected-account",level:3},{value:"Send Transaction",id:"send-transaction",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"sats-wagmi---reactive-primitives-for-bitcoin-apps",children:"sats-wagmi - Reactive primitives for Bitcoin apps"})}),"\n",(0,a.jsxs)(n.p,{children:["sats-wagmi is a library with a handful of BTC wallet connectors, leaving aside the need of the developer to integrate each one individually. The library also exports useful React hooks that mimic the standard followed in the EVM ",(0,a.jsx)(n.a,{href:"https://wagmi.sh/react/getting-started",children:"wagmi"})," library."]}),"\n",(0,a.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["BTC Wallet connectors:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Metamask Snap"}),"\n",(0,a.jsx)(n.li,{children:"Unisat"}),"\n",(0,a.jsx)(n.li,{children:"Leather"}),"\n",(0,a.jsx)(n.li,{children:"Xverse"}),"\n",(0,a.jsx)(n.li,{children:"Bitget"}),"\n",(0,a.jsx)(n.li,{children:"OKX Wallet"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["BTC functionality:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"send BTC"}),"\n",(0,a.jsx)(n.li,{children:"sign PSBTs"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.li,{children:"React hooks"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,a.jsxs)(n.p,{children:["To use sats-wagmi, all you need to do is install ",(0,a.jsx)(n.code,{children:"@gobob/sats-wagmi"}),":"]}),"\n",(0,a.jsxs)(s.A,{groupId:"npm2yarn",children:[(0,a.jsx)(i.A,{value:"npm",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm install @gobob/sats-wagmi\n"})})}),(0,a.jsx)(i.A,{value:"yarn",label:"Yarn",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yarn add @gobob/sats-wagmi\n"})})}),(0,a.jsx)(i.A,{value:"pnpm",label:"pnpm",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pnpm add @gobob/sats-wagmi\n"})})})]}),"\n",(0,a.jsx)(n.h2,{id:"connect-wallet",children:"Connect Wallet"}),"\n",(0,a.jsx)(n.h3,{id:"1-wrap-app-in-context-provider",children:"1. Wrap App in Context Provider"}),"\n",(0,a.jsx)(n.p,{children:"To start, we will need to wrap our React App with Context so that our application is aware of sats-wagmi & React Query's reactive state and in-memory caching:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:' // 1. Import modules\nimport { QueryClient, QueryClientProvider } from \'@tanstack/react-query\'\nimport { SatsWagmiConfig } from "@gobob/sats-wagmi";\n\n// 2. Set up a React Query client.\nconst queryClient = new QueryClient()\n\nfunction App() {\n  // 3. Wrap app with sats-wagmi and React Query context.\n  return (\n    <QueryClientProvider client={queryClient}>\n      <SatsWagmiConfig network="testnet" queryClient={queryClient}>\n        {/** ... */} \n      </SatsWagmiConfig>\n    </QueryClientProvider> \n  )\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"2-display-wallet-options",children:"2. Display Wallet Options"}),"\n",(0,a.jsxs)(n.p,{children:["After that, we will create a ",(0,a.jsx)(n.code,{children:"WalletOptions"})," component that will display our connectors. This will allow users to select a wallet and connect."]}),"\n",(0,a.jsxs)(n.p,{children:["Below, we are rendering a list of ",(0,a.jsx)(n.code,{children:"connectors"})," retrieved from ",(0,a.jsx)(n.code,{children:"useConnect"}),". When the user clicks on a connector, the ",(0,a.jsx)(n.code,{children:"connect"})," function will connect the users' wallet."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"import * as React from 'react'\nimport { useConnect, SatsConnector } from \"@gobob/sats-wagmi\";\n\nexport function WalletOptions() {\n  const { connectors, connect } = useConnect()\n\n  return connectors.map((connector) => (\n    <button key={connector.name} onClick={() => connect({ connector })}>\n      {connector.name}\n    </button>\n  ))\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"3-display-connected-account",children:"3. Display Connected Account"}),"\n",(0,a.jsx)(n.p,{children:"Lastly, if an account is connected, we want to show the connected address."}),"\n",(0,a.jsxs)(n.p,{children:["We are utilizing ",(0,a.jsx)(n.code,{children:"useAccount"})," to extract the account and ",(0,a.jsx)(n.code,{children:"useDisconnect"}),' to show a "Disconnect" button so a user can disconnect their wallet.']}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import { useAccount, useDisconnect } from "@gobob/sats-wagmi";\n\nfunction Account() {\n  const { address } = useAccount()\n  const { disconnect } = useDisconnect()\n\n  return (\n    <div>\n      <p>Address: {address}</p>\n      <button onClick={() => disconnect()}>Disconnect</button>\n    </div>\n  );\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"send-transaction",children:"Send Transaction"}),"\n",(0,a.jsxs)(n.p,{children:["Create your ",(0,a.jsx)(n.code,{children:"SendTransaction"})," component that will contain the send transaction logic."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import { useAccount } from "@gobob/sats-wagmi";\n\nfunction SendTransaction() {\n  const { address, connector } = useAccount()\n\n  const handleTransfer = () => {\n    connector?.sendToAddress(\n      "tb1p9gl248kp19jgennea98e2tv8acfrvfv0yws2tc5j6u72e84caapsh2hexs",\n      100000000\n    );\n  };\n\n  return (\n    <div>\n      <p>Address: {address}</p>\n      <button onClick={handleTransfer}>Transfer 1 BTC</button>\n    </div>\n  );\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},9365:(e,n,t)=>{t.d(n,{A:()=>i});t(6540);var a=t(4164);const r={tabItem:"tabItem_Ymn6"};var s=t(4848);function i(e){let{children:n,hidden:t,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,a.A)(r.tabItem,i),hidden:t,children:n})}},1470:(e,n,t)=>{t.d(n,{A:()=>y});var a=t(6540),r=t(4164),s=t(3104),i=t(6347),o=t(205),l=t(7485),c=t(1682),u=t(679);function d(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:r}}=e;return{value:n,label:t,attributes:a,default:r}}))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const r=(0,i.W6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(s),(0,a.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})}),[s,r])]}function b(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,s=h(e),[i,l]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:s}))),[c,d]=m({queryString:t,groupId:r}),[b,f]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,s]=(0,u.Dv)(t);return[r,(0,a.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:r}),g=(()=>{const e=c??b;return p({value:e,tabValues:s})?e:null})();(0,o.A)((()=>{g&&l(g)}),[g]);return{selectedValue:i,selectValue:(0,a.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),f(e)}),[d,f,s]),tabValues:s}}var f=t(2303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(4848);function x(e){let{className:n,block:t,selectedValue:a,selectValue:i,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),u=e=>{const n=e.currentTarget,t=l.indexOf(n),r=o[t].value;r!==a&&(c(n),i(r))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n),children:o.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>l.push(e),onKeyDown:d,onClick:u,...s,className:(0,r.A)("tabs__item",g.tabItem,s?.className,{"tabs__item--active":a===n}),children:t??n},n)}))})}function w(e){let{lazy:n,children:t,selectedValue:s}=e;const i=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===s));return e?(0,a.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function j(e){const n=b(e);return(0,v.jsxs)("div",{className:(0,r.A)("tabs-container",g.tabList),children:[(0,v.jsx)(x,{...n,...e}),(0,v.jsx)(w,{...n,...e})]})}function y(e){const n=(0,f.A)();return(0,v.jsx)(j,{...e,children:d(e.children)},String(n))}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var a=t(6540);const r={},s=a.createContext(r);function i(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);