<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-learn/bob-stack/op-stack" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Phase 1: Optimistic BOB | BOB - Build on Bitcoin</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.gobob.xyz/img/bob-social-card.png"><meta data-rh="true" name="twitter:image" content="https://docs.gobob.xyz/img/bob-social-card.png"><meta data-rh="true" property="og:url" content="https://docs.gobob.xyz/docs/learn/bob-stack/op-stack"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="bitcoin, layer 2, scaling, rollup, rust, smart contracts, evm, solidity, collective, open source, blockchain"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Phase 1: Optimistic BOB | BOB - Build on Bitcoin"><meta data-rh="true" name="description" content="The first deployment of BOB uses the OP Stack, benefiting from infrastructure, marketing, and BD support. Eventually, The BOB OP-Stack deployment can be Superchain-compatible making it easy for users to move seamlessly between different Superchain rollups."><meta data-rh="true" property="og:description" content="The first deployment of BOB uses the OP Stack, benefiting from infrastructure, marketing, and BD support. Eventually, The BOB OP-Stack deployment can be Superchain-compatible making it easy for users to move seamlessly between different Superchain rollups."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.gobob.xyz/docs/learn/bob-stack/op-stack"><link data-rh="true" rel="alternate" href="https://docs.gobob.xyz/docs/learn/bob-stack/op-stack" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.gobob.xyz/docs/learn/bob-stack/op-stack" hreflang="x-default"><script src="https://cdn.usefathom.com/script.js" site="NBNJSTNS" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.fe108d62.css">
<script src="/assets/js/runtime~main.db2c4f18.js" defer="defer"></script>
<script src="/assets/js/main.03a6d50b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#f58b00;color:#fff" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Missing something? Want to know more? <a target="_blank" rel="noopener noreferrer" href="https://forms.gle/etYqChR3aahUFuEZ9">Provide feedback</a>.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="BOB Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo-light.svg" alt="BOB Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/learn/introduction/stack">Learn</a><a class="navbar__item navbar__link" href="/docs/build/getting-started/">Build</a><a class="navbar__item navbar__link" href="/docs/contracts/src/src/SystemState.sol/library.SystemState">Contracts</a></div><div class="navbar__items navbar__items--right"><a href="https://discord.gg/gobob" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/bob-collective/bob" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/learn/introduction/stack">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/introduction/stack">What Is BOB?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/introduction/use-cases">What Can I Build on BOB?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/introduction/contribution">How Can I Contribute?</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/learn/guides/bob-gateway/">Using BOB</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/guides/bob-gateway/">BOB Gateway</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/guides/bob-fusion/">BOB Fusion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/guides/onboard-to-bob">Onboarding to BOB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/guides/ethereum-bridge/">Bridge from Ethereum to BOB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/guides/bob-pay/">BOB Pay</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/guides/faq/">FAQs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/learn/bob-stack/stack-overview">The BOB Stack and Roadmap</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/bob-stack/stack-overview">Stack Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/bob-stack/roadmap">Rollup Roadmap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/learn/bob-stack/op-stack">Phase 1: Optimistic BOB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/bob-stack/merged-mining">Phase 2: Optimistic Merged Mining</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/learn/security/privileged-roles">Security</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">The BOB Stack and Roadmap</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Phase 1: Optimistic BOB</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Phase 1: Optimistic BOB</h1></header>
<p>The first deployment of BOB uses the <a href="https://stack.optimism.io" target="_blank" rel="noopener noreferrer">OP Stack</a>, benefiting from infrastructure, marketing, and BD support. Eventually, The BOB OP-Stack deployment can be <a href="https://www.optimism.io/superchain" target="_blank" rel="noopener noreferrer">Superchain-compatible</a> making it easy for users to move seamlessly between different Superchain rollups.</p>
<p>We are working on extending the functionality of the OP stack specifically for Bitcoin: (1) fees payable in tokenized BTC via <a href="https://opengsn.org/" target="_blank" rel="noopener noreferrer">OpenGSN</a> and <a href="https://ethereum.org/en/roadmap/account-abstraction/" target="_blank" rel="noopener noreferrer">account abstraction</a> to ensure easy on-ramp from Bitcoin, and (2) in <a href="/docs/learn/bob-stack/merged-mining">phase 2</a>, verify the rollup state through Bitcoin miners.
When possible, we implement smart contracts directly on the EVM to ensure OP stack updates can be directly applied to BOB.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-op-stack">Why OP Stack?<a href="#why-op-stack" class="hash-link" aria-label="Direct link to Why OP Stack?" title="Direct link to Why OP Stack?">​</a></h2>
<p>There are several great options for rollups including building them from scratch or using zk rollups (<a href="https://starkware.co/" target="_blank" rel="noopener noreferrer">Starkware</a>, <a href="https://zksync.io/" target="_blank" rel="noopener noreferrer">zkSync</a>, <a href="https://polygon.technology/polygon-zkevm" target="_blank" rel="noopener noreferrer">Polygon</a>, <a href="https://scroll.io/" target="_blank" rel="noopener noreferrer">Scroll</a>, ...) and optimistic rollups (<a href="https://arbitrum.io/" target="_blank" rel="noopener noreferrer">Arbitrum</a>, <a href="https://docs.optimism.io/stack/getting-started" target="_blank" rel="noopener noreferrer">OP Stack</a>, ...). BOB&#x27;s key values are experimentation, real-world impact, and freedom of choice.</p>
<p>In our opinion, OP Stack aligns best with these values as it allows developers to quickly deploy new protocols without having to reimplement existing protocols in new programming languages. It also gives users choice as the Superchain concept allows users to freely move between OP Stack rollups. We have further considered Arbitrum, but opted against this since, under the hood, Arbitrum uses WASM and has more incompatibilities than OP Stack (albeit the team is working very hard to mitigate those). ZK rollups are too untested for our preference and require smart contract modifications (type 3 and 4 zkEVM rollups), are slow (type 1 and 2 zkEVM), or require complete rewrites of wallet software and integrations (Starkware, ...).</p>
<p>BOB is built so that developers can deploy any EVM smart contract without changes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="adopting-the-op-stack">Adopting the OP Stack<a href="#adopting-the-op-stack" class="hash-link" aria-label="Direct link to Adopting the OP Stack" title="Direct link to Adopting the OP Stack">​</a></h2>
<p>BOB modifies the standard OP Stack:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="governance">Governance<a href="#governance" class="hash-link" aria-label="Direct link to Governance" title="Direct link to Governance">​</a></h3>
<p>BOB will have its own governance to reach community decisions and enact changes. Governance will be rolled out gradually as the community grows.</p>
<p>If BOB chooses to be comptabile with the Superchain, then parts of BOB will be subject to OP governance with the Superchain upgrade. An OP Security Council will be capable of enacting security upgrades of the OP chain and L1 and L2 bridge contracts.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-availability">Data Availability<a href="#data-availability" class="hash-link" aria-label="Direct link to Data Availability" title="Direct link to Data Availability">​</a></h3>
<p>A Data Availability (DA) layer stores the raw inputs to the state transition function for the execution layer. The OP Stack supports <a href="https://stack.optimism.io/docs/understand/landscape/#data-availability" target="_blank" rel="noopener noreferrer">multiple DAs but sets Ethereum as the de facto DA</a>. The OP Stack Superchain is considering a dedicated <a href="https://stack.optimism.io/docs/understand/explainer/#alt-data-availability-layer-plasma-protocol" target="_blank" rel="noopener noreferrer">Plasma DA chain</a> to address the rising cost and limited scalability of Ethereum as a DA layer.</p>
<p>BOB is using Ethereum as DA, but we are investigating alternatives for future optimization:</p>
<ul>
<li>Bitcoin: The Celestia team has a specification for <a href="https://github.com/rollkit/bitcoin-da/blob/main/spec.md" target="_blank" rel="noopener noreferrer">using Bitcoin as a DA layer</a> that suits BOB needs and would ensure compatibility with Celestia deployments. Using Bitcoin as a DA layer would introduce complexity around wallets as users would need to provide BTC alongside their EVM transactions to pay for DA costs.</li>
<li>Celestia: If Celestia were to add an option to pay for DA cost in (bridged) Bitcoin, Celestia might become a cheaper and decent alternative to using Ethereum or Bitcoin as a DA layer.</li>
<li>Merged mined DA chains: Specialized DA chains that inherit security from Bitcoin via merged mining. This would be the most secure and scalable solution but requires significant development effort.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sequencing">Sequencing<a href="#sequencing" class="hash-link" aria-label="Direct link to Sequencing" title="Direct link to Sequencing">​</a></h3>
<p>The OP Stack uses a single, centralized sequencer. BOB will use the same sequencer model for its launch but with the addition of merged mining, add functionality to verify the work of the sequencer by Bitcoin miners.</p>
<p>We are welcoming efforts to decentralize sequencers pushed by the OP Stack.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="execution">Execution<a href="#execution" class="hash-link" aria-label="Direct link to Execution" title="Direct link to Execution">​</a></h3>
<p>OP Stack uses a fork of go-ethereum called <a href="https://op-geth.optimism.io/" target="_blank" rel="noopener noreferrer">op-geth</a>. BOB has no changes to op-geth.</p>
<p>Instead of changing the execution client, necessary features including proving Bitcoin state and paying transaction fees in bridged Bitcoin are added within the EVM as smart contracts. This has the advantage that:</p>
<ol>
<li>The BOB OP Stack deployment stays up-to-date with improvements made by other teams improving the OP Stack without having to maintain a custom fork. In turn, this ensures that features available on other EVM chains and rollups are 1:1 applicable to BOB.</li>
<li>Technology built on top of the EVM within BOB like the merged mining security, paying in bridged Bitcoin for transaction fees, and the BTC light client can be deployed on any EVM chain. BOB is thus ready for a multi-chain and multi-rollup world.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="settlement--fraud-proofs">Settlement &amp; Fraud Proofs<a href="#settlement--fraud-proofs" class="hash-link" aria-label="Direct link to Settlement &amp; Fraud Proofs" title="Direct link to Settlement &amp; Fraud Proofs">​</a></h3>
<p>The OP Stack settles on Ethereum. Initially, the OP Stack lacked fraud proofs which was a major downside of using OP Stack as users could not prove fraudulent behavior by the sequencer. On July 10th 2024, the OP-stack used by the BOB chain switches to a full fraud-proof enabled implementation, thus ensuring honest sequencer operation.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Important Notice for Bridges and Users</div><div class="admonitionContent_BuS1"><p><strong>ALL</strong> withdrawals that are not finalized before the Fault Proofs upgrade executes will need to be reproven after the upgrade is complete.</p><ul>
<li>Reproving simply requires that you execute the withdrawal proving flow again.</li>
<li>Withdrawals prior to the Fault Proofs upgrade must wait a 7-day challenge period before finalization. As a result, any withdrawal initiated less than 7 days before the upgrade cannot be finalized before the upgrade is executed. You may want to consider waiting until after the upgrade is complete to begin a withdrawal during this 7-day window.</li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="overview-of-changes">Overview of Changes<a href="#overview-of-changes" class="hash-link" aria-label="Direct link to Overview of Changes" title="Direct link to Overview of Changes">​</a></h4>
<p>If you are operating a custom bridge, review this section for changes you need to make. If you are using Optimism SDK or Viem for your bridging, you can <a href="#for-bridges-and-centralized-exchanges">skip to the next section</a>.</p>
<p>The <code>L2OutputOracle</code> is being entirely removed and replaced by the <code>OptimismPortal</code> and <code>DisputeGameFactory</code>. The <code>L2OutputOracle</code> smart contract is currently used by the trusted Proposer role to store L2 state output proposals.
Presently, developers use these outputs to prove that their withdrawals actually happened on L2. But with fault proofs, developers will have to change how their client software proves withdrawals in the first step of the two-step withdrawal process.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="l2outputoracle"><code>L2OutputOracle</code><a href="#l2outputoracle" class="hash-link" aria-label="Direct link to l2outputoracle" title="Direct link to l2outputoracle">​</a></h5>
<p>The <code>OptimismPortal</code> is changing slightly with Fault Proof Mainnet because it now points to the <code>DisputeGameFactory</code> contract instead of the <code>L2OutputOracle</code> contract.
Most notable change for developers is that withdrawals will have to be proven against the <code>rootClaim</code> of some dispute game rather than referencing an output in the <code>L2OutputOracle</code> contract.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="optimismportal"><code>OptimismPortal</code><a href="#optimismportal" class="hash-link" aria-label="Direct link to optimismportal" title="Direct link to optimismportal">​</a></h5>
<p>The <code>OptimismPortal</code> smart contract is the low-level contract on L1 used to execute deposits and withdrawals.
Previously, developers would look at the <code>L2OutputOracle</code> to find the exact next output that included their withdrawal.
Now, developers must look at the <code>OptimismPortal</code> contract to determine the <code>respectedGameType</code> and then use this information to query the <code>DisputeGameFactory</code> for a list of recent <code>DisputeGame</code> contracts with the correct game type.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="disputegamefactory"><code>DisputeGameFactory</code><a href="#disputegamefactory" class="hash-link" aria-label="Direct link to disputegamefactory" title="Direct link to disputegamefactory">​</a></h5>
<p>It is recommended that developers search for a reasonable number of recent games, say 100 games, and pick the first proposal with a sufficient block number.
Developers should then verify this proposal locally as the default game type will allow for permissionless proposals and there is no longer a strong guarantee that proposals will be valid.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="for-bridges-and-centralized-exchanges">For Bridges and Centralized Exchanges<a href="#for-bridges-and-centralized-exchanges" class="hash-link" aria-label="Direct link to For Bridges and Centralized Exchanges" title="Direct link to For Bridges and Centralized Exchanges">​</a></h4>
<p>Enable the fault proofs impacts bridges, centralized exchanges, and custom solutions that use withdrawals.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>NOTE</div><div class="admonitionContent_BuS1"><p>Withdrawals that haven&#x27;t finalized before the upgrade occurs will be unable to be finalized post-upgrade without reproving. This means these withdrawals will need to go through a new 7-day period. The time accrued before the upgrade will not count.
This means the withdrawal time could be as long as 13-14 days during the upgrade window. (If you submit it ~6 days before the upgrade, then must re-prove after the upgrade, you will have to wait a new seven days.)</p></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="update-logic-to-support-fault-proofs">Update Logic to Support Fault Proofs<a href="#update-logic-to-support-fault-proofs" class="hash-link" aria-label="Direct link to Update Logic to Support Fault Proofs" title="Direct link to Update Logic to Support Fault Proofs">​</a></h5>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>NOTE</div><div class="admonitionContent_BuS1"><p>Most teams use the Optimism SDK or Viem to handle this logic under the hood and will simply need to update their software version ahead of the upgrade. However, any project performing withdrawals programmatically will need to update their client code (see <a href="#optimismportal"><code>OptimismPortal</code></a> for details).</p></div></div>
<ul>
<li><strong>Option 1: Optimism SDK Update.</strong> If you use OptimismSDK for bridging, simply update to version 3.2.0 or higher.
The Optimism SDK changes do not break the API and require no changes other than updating to the correct software version to support the new <code>OptimismPortal</code> logic. The Optimism SDK will automatically begin to use the new logic once it detects that the FPM update has gone live.</li>
<li><strong>Option 2: Viem Update.</strong> Update to the latest version of Viem (version of &gt;=2.9.0). Viem will automatically begin to use the new logic once it detects that the FPM update has gone live.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="update-withdrawal-monitor">Update Withdrawal Monitor<a href="#update-withdrawal-monitor" class="hash-link" aria-label="Direct link to Update Withdrawal Monitor" title="Direct link to Update Withdrawal Monitor">​</a></h5>
<p>The Withdrawal Monitor service is an important part of the two-step withdrawal system that checks if anyone has been able to prove withdrawals that do not actually appear on L2.
The Withdrawal Monitor is now slightly slower at startup time but is more reliable, simpler, and compatible with more infrastructure to more easily support any OP Stack chain.
Changes to the Withdrawal Monitor are entirely backwards compatible.</p>
<ul>
<li><strong>Option 1: Withdrawal from source.</strong> If building or using withdrawal-monitor from source, make sure that you are using the latest develop branch. All withdrawal monitor changes are fully backwards compatible.</li>
<li><strong>Option 2: Docker image.</strong> If using docker, use the latest chain-mon docker image.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="update-dispute-monitor">Update Dispute Monitor<a href="#update-dispute-monitor" class="hash-link" aria-label="Direct link to Update Dispute Monitor" title="Direct link to Update Dispute Monitor">​</a></h5>
<p>The Dispute Monitor service detects when invalid outputs have been proposed. Given the large number of changes to the output proposal system, the current Fault Monitor is being replaced in favor of a new Dispute Monitor purposely built for the fault proof monitor system.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>NOTE</div><div class="admonitionContent_BuS1"><p>Any team running the current Fault Monitor will see the monitor stop functioning when the Fault Proof Monitor upgrade goes live. These teams should run the new service and update their alerting accordingly.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps">​</a></h4>
<ul>
<li>See the <a href="https://docs.optimism.io/stack/protocol/fault-proofs/explainer" target="_blank" rel="noopener noreferrer">Fault Proofs Explainer</a> to learn more about the three main components of the Fault Proof System.</li>
<li>You can also read more about <a href="https://docs.optimism.io/stack/protocol/fault-proofs/cannon" target="_blank" rel="noopener noreferrer">Cannon FPVM</a> and <a href="https://docs.optimism.io/stack/protocol/fault-proofs/mips" target="_blank" rel="noopener noreferrer">Mips.sol</a>, the onchain smart contract implementation of Cannon.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="settlement--merged-mining">Settlement &amp; Merged mining<a href="#settlement--merged-mining" class="hash-link" aria-label="Direct link to Settlement &amp; Merged mining" title="Direct link to Settlement &amp; Merged mining">​</a></h3>
<p>We are working towards an approach to add merged mining security to the rollup by making a PoW part of state transition. Consequently, a lack of PoW constitutes a fault by the sequencer. Thereby, Bitcoin miners validate the rollup to offset the trust in the sequencer (in both the centralized and decentralized sequencer case).</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/bob-collective/bob/tree/master/docs/docs/learn/bob-stack/op-stack.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/learn/bob-stack/roadmap"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Rollup Roadmap</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/learn/bob-stack/merged-mining"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Phase 2: Optimistic Merged Mining</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-op-stack" class="table-of-contents__link toc-highlight">Why OP Stack?</a></li><li><a href="#adopting-the-op-stack" class="table-of-contents__link toc-highlight">Adopting the OP Stack</a><ul><li><a href="#governance" class="table-of-contents__link toc-highlight">Governance</a></li><li><a href="#data-availability" class="table-of-contents__link toc-highlight">Data Availability</a></li><li><a href="#sequencing" class="table-of-contents__link toc-highlight">Sequencing</a></li><li><a href="#execution" class="table-of-contents__link toc-highlight">Execution</a></li><li><a href="#settlement--fraud-proofs" class="table-of-contents__link toc-highlight">Settlement &amp; Fraud Proofs</a></li><li><a href="#settlement--merged-mining" class="table-of-contents__link toc-highlight">Settlement &amp; Merged mining</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/gobob" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/build_on_bob" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/+CyIcLW2nfaFlNDc1" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Builders</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/bob-collective/bob" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://gobob.xyz" target="_blank" rel="noopener noreferrer" class="footer__link-item">BOB Homepage<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://build-on-bitcoin.notion.site/BOB-Press-Kit-1be66c38713d480eab01000bdd164206" target="_blank" rel="noopener noreferrer" class="footer__link-item">Press Kit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://drive.google.com/drive/u/0/folders/1c30QDkyWgaV8xSEpCXFWJj1WQyUjSm7N" target="_blank" rel="noopener noreferrer" class="footer__link-item">Brand Kit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://build-on-bitcoin.notion.site/BOB-Summary-23fad2d446ff467d8551b924eb3338fc" target="_blank" rel="noopener noreferrer" class="footer__link-item">One Pager<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Built with ❤️ by the BOB Collective. 2024.</div></div></div></footer></div>
</body>
</html>